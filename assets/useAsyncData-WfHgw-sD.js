import{r as t}from"./index-DmGc86nm.js";const i="AbortError",R="The operation was aborted.",S=()=>{if(typeof DOMException<"u")return new DOMException(R,i);const r=new Error(R);return r.name=i,r},x=r=>{if(r?.aborted)throw S()},M=r=>r instanceof Error&&r.name===i,_="데이터를 불러오는데 실패했습니다",y=(r,A,d={})=>{const{getErrorMessage:l,onError:E}=d,[g,p]=t.useState(A),[w,f]=t.useState(!0),[O,b]=t.useState(null),o=t.useRef(0),c=t.useRef(null),s=t.useCallback(()=>{c.current?.abort(),c.current=null},[]),u=t.useCallback(async()=>{const a=o.current+1;o.current=a,s();const n=new AbortController;c.current=n,f(!0),b(null);try{const e=await r(n.signal);if(a!==o.current||n.signal.aborted)return;p(e)}catch(e){if(a!==o.current||n.signal.aborted||M(e))return;E?.(e),b(l?.(e)??(e instanceof Error?e.message:_))}finally{a===o.current&&!n.signal.aborted&&f(!1)}},[s,l,r,E]);return t.useEffect(()=>(u(),()=>{o.current+=1,s()}),[s,u]),{data:g,isLoading:w,error:O,reload:u}};export{M as i,x as t,y as u};
